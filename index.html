<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jetniphat's Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@100;200;300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Anuphan', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .admin-panel {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        .category-filter {
            color: #6b7280;
        }
        .category-filter:hover {
            color: #2563eb;
            background: rgba(37, 99, 235, 0.1);
        }
        .category-filter.active {
            background: #2563eb;
            color: white;
        }
        .thumbnail {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .thumbnail:hover {
            transform: scale(1.05);
        }
        .thumbnail.active {
            border: 3px solid #2563eb;
        }
        .modal-backdrop {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal-backdrop.show {
            opacity: 1;
        }
        .modal-content {
            transform: scale(0.7) translateY(-50px);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal-content.show {
            transform: scale(1) translateY(0);
            opacity: 1;
        }
        .image-fade {
            transition: opacity 0.3s ease-in-out;
        }
        .thumbnail-hover {
            transition: all 0.2s ease;
        }
        .thumbnail-hover:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .project-card {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .project-card.fade-out {
            opacity: 0;
            transform: translateY(20px);
        }
        .project-card.fade-in {
            animation: projectFadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        @keyframes projectFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        .notification-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .notification-popup.show {
            transform: translateX(0);
        }
        .notification-popup.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .notification-popup.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        .notification-popup.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        .drag-handle {
            cursor: grab;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .drag-handle:active {
            cursor: grabbing;
        }
        .project-card:hover .drag-handle {
            opacity: 1;
        }
        .project-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
            z-index: 1000;
        }
        .project-card.drag-over {
            border: 2px dashed #2563eb;
            background: rgba(37, 99, 235, 0.1);
        }
        .sort-mode-active .project-card {
            cursor: grab;
        }
        .sort-mode-active .project-card:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
        }
        .sort-mode-banner {
            position: fixed;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 12px 24px;
            rounded: 12px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            font-weight: 600;
            animation: slideDown 0.3s ease-out;
        }
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }
        .timeline-item {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }
        .timeline-item.animate {
            opacity: 1;
            transform: translateY(0);
        }
        .timeline-item:nth-child(even) .timeline-content {
            animation-delay: 0.2s;
        }
        .school-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .timeline-dot {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border: 4px solid white;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen text-gray-800">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white bg-opacity-90 backdrop-blur-md z-50 px-4 sm:px-6 py-3 sm:py-4 shadow-sm">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <h1 class="text-lg sm:text-xl md:text-2xl font-bold">Jetniphat's Portfolio</h1>
            <div class="flex items-center space-x-3 sm:space-x-4 md:space-x-6">
                <a href="#about" class="hover:text-blue-600 transition-colors py-2 text-sm sm:text-base"></a>
                <a href="#education" class="hover:text-blue-600 transition-colors py-2 text-sm sm:text-base"></a>
                <a href="#projects" class="hover:text-blue-600 transition-colors py-2 text-sm sm:text-base">‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
                <a href="#contact" class="hover:text-blue-600 transition-colors py-2 text-sm sm:text-base">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</a>
                <button id="adminBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-lg transition-colors text-sm sm:text-base"></button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 pb-16 px-6">
        <div class="max-w-6xl mx-auto text-center fade-in">
            <div class="w-32 h-32 bg-gradient-to-r from-blue-400 to-blue-600 rounded-full mx-auto mb-8 flex items-center justify-center text-4xl text-white">
                üë®‚Äçüíª
            </div>
            <h2 id="heroName" class="text-5xl font-bold mb-4 min-h-[4rem]">
                <span id="typewriterText"></span>
                <span id="cursor" class="animate-pulse">|</span>
            </h2>
            <p id="heroDescription" class="text-xl text-gray-600 mb-8">‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏≠‡∏∏‡∏î‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏Ñ‡∏£‡∏±‡∏ö ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö</p>
            <div class="flex justify-center space-x-4">
                <a href="#projects" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-colors inline-block">‡∏î‡∏π‡∏ú‡∏•‡∏á‡∏≤‡∏ô</a>
                <a href="#contact" class="border border-blue-400 hover:bg-blue-400 hover:text-white px-8 py-3 rounded-lg font-semibold transition-colors inline-block">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-16 px-6 bg-blue-50 bg-opacity-50">
        <div class="max-w-6xl mx-auto">
            <h3 class="text-3xl font-bold text-center mb-12">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ú‡∏°</h3>
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <p id="aboutText" class="text-lg text-gray-600 leading-relaxed mb-6">
                        ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ú‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏≤‡∏¢‡πÄ‡∏à‡∏ï‡∏ï‡πå‡∏ô‡∏¥‡∏†‡∏±‡∏ó‡∏ò‡πå ‡πÄ‡∏ö‡πá‡∏ç‡∏à‡∏°‡∏¥‡∏ï‡∏£‡∏Å‡∏∏‡∏• (‡∏ã‡∏±‡∏Ñ‡πÄ‡∏ã‡∏™) ‡∏ú‡∏°‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ô‡πÉ‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡∏Ç‡∏≤‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ú‡∏™‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏Å‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏ï‡∏£‡∏£‡∏Å‡∏∞ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ
                        ‡∏ú‡∏°‡∏ä‡∏∑‡πà‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏î‡πâ‡∏≤‡∏ô‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≤‡∏á ‡πÜ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏ï‡πà‡∏≠‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏ß‡∏° ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏®‡∏ß‡∏Å‡∏£‡∏£‡∏°‡∏ú‡∏™‡∏≤‡∏ô‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏±‡πà‡∏ô‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô ‡πÇ‡∏î‡∏¢‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏±‡∏ö‡∏ú‡∏°
                    </p>
                    <div class="flex flex-wrap gap-3">
                        <span class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm">HTML</span>
                        <span class="bg-blue-600 text-white px-4 py-2 rounded-full text-sm">JavaScript</span>
                        <span class="bg-blue-400 text-white px-4 py-2 rounded-full text-sm">Python</span>
                        <span class="bg-blue-700 text-white px-4 py-2 rounded-full text-sm">Swift</span>
                        <span class="bg-blue-900 text-white px-4 py-2 rounded-full text-sm">Engineering skills</span>
                    </div>
                </div>
                <div class="bg-gradient-to-r from-blue-500 to-blue-700 p-8 rounded-2xl text-white">
                    <h4 class="text-xl font-bold mb-4">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ô‡∏¥‡∏™‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏°</h4>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-2">
                                <span>‡∏à‡∏∞‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏î ‡πÑ‡∏°‡πà‡∏¢‡∏≠‡∏°‡πÅ‡∏û‡πâ</span>
                                <span>90%</span>
                            </div>
                            <div class="bg-white bg-opacity-30 rounded-full h-2">
                                <div class="bg-white rounded-full h-2 w-[90%]"></div>
                            </div>
                        </div>
                        <div>
                            <div class="flex justify-between mb-2">
                                <span>‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡πâ‡∏≥‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏Å‡πâ‡∏ß ‡∏£‡∏±‡∏ö‡∏ü‡∏±‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏≠‡∏¢‡∏∏‡πà‡πÄ‡∏™‡∏°‡∏≠</span>
                                <span>85%</span>
                            </div>
                            <div class="bg-white bg-opacity-30 rounded-full h-2">
                                <div class="bg-white rounded-full h-2 w-[85%]"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <span>‡∏Å‡∏•‡πâ‡∏≤‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</span>
                                <span>80%</span>
                            </div>
                            <div class="bg-white bg-opacity-30 rounded-full h-2">
                                <div class="bg-white rounded-full h-2 w-[80%]"></div>
                            </div>
                            
                            
                            
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education" class="py-16 px-6">
        <div class="max-w-6xl mx-auto">
            <h3 class="text-3xl font-bold text-center mb-12">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h3>
            
            <!-- Education Timeline -->
            <div id="educationTimeline" class="relative">
                <!-- Timeline line -->
                <div class="absolute left-1/2 transform -translate-x-1/2 w-1 bg-gradient-to-b from-blue-400 to-blue-600 h-full rounded-full"></div>
                
                <!-- Education items will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-16 px-6 bg-blue-50 bg-opacity-50">
        <div class="max-w-6xl mx-auto">
            <h3 class="text-3xl font-bold text-center mb-12">‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h3>
            
            <!-- Category Filter -->
            <div class="flex justify-center mb-8 px-4">
                <div class="bg-white bg-opacity-80 backdrop-blur-md rounded-2xl p-2 shadow-lg border border-blue-100 flex flex-wrap justify-center gap-1 sm:gap-2 max-w-full">
                    <button id="filterAll" class="category-filter active px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-xl font-semibold transition-all text-xs sm:text-sm whitespace-nowrap">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                    <button id="filterProject" class="category-filter px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-xl font-semibold transition-all text-xs sm:text-sm whitespace-nowrap">‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</button>
                    <button id="filterLearning" class="category-filter px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-xl font-semibold transition-all text-xs sm:text-sm whitespace-nowrap">‡∏î‡πâ‡∏≤‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£-‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡∏ô‡πÄ‡∏≠‡∏á</button>
                    <button id="filterLeadership" class="category-filter px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-xl font-semibold transition-all text-xs sm:text-sm whitespace-nowrap">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥‡πÅ‡∏•‡∏∞‡∏à‡∏¥‡∏ï‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</button>
                    <button id="filterPresentation" class="category-filter px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 rounded-xl font-semibold transition-all text-xs sm:text-sm whitespace-nowrap">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠</button>
                </div>
            </div>

            <!-- Admin Sort Controls -->
            <div id="adminSortControls" class="flex justify-center mb-6 px-4 hidden">
                <div class="bg-green-50 border border-green-200 rounded-2xl p-4 shadow-lg">
                    <div class="flex flex-wrap justify-center items-center gap-4">
                        <span class="text-green-700 font-semibold text-sm">üîß ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:</span>
                        <button id="toggleSortMode" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-sm">
                            üîÑ ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á
                        </button>
                        <button id="saveSortOrder" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-sm hidden">
                            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö
                        </button>
                        <button id="cancelSort" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-sm hidden">
                            ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                    </div>
                </div>
            </div>

            <!-- Sort Mode Banner -->
            <div id="sortModeBanner" class="sort-mode-banner hidden">
                üéØ ‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á: ‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö
            </div>
            
            <div id="projectsGrid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Projects will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 px-6 bg-blue-50 bg-opacity-50">
        <div class="max-w-4xl mx-auto text-center">
            <h3 class="text-3xl font-bold mb-8">social media</h3>
            <p class="text-lg text-gray-600 mb-8"></p>
            <div class="flex justify-center space-x-6">
                <a href="https://www.facebook.com/jetniphat.benchamitkun" target="_blank" rel="noopener noreferrer" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-3">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    <span>Facebook</span>
                </a>
                <a href="https://www.instagram.com/jx._niphxt/" target="_blank" rel="noopener noreferrer" class="bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white px-8 py-4 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg flex items-center space-x-3">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                    </svg>
                    <span>Instagram</span>
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 px-6">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-gray-300">¬© 2025 ‡∏ô‡∏≤‡∏¢‡πÄ‡∏à‡∏ï‡∏ï‡πå‡∏ô‡∏¥‡∏†‡∏±‡∏ó‡∏ò‡πå ‡πÄ‡∏ö‡πá‡∏ç‡∏à‡∏°‡∏¥‡∏ï‡∏£‡∏Å‡∏∏‡∏•</p>
        </div>
    </footer>

    <!-- Project Detail Modal -->
    <div id="projectModal" class="modal-backdrop fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div id="modalContent" class="modal-content bg-white rounded-2xl p-8 max-w-6xl w-full max-h-[95vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modalTitle" class="text-2xl font-bold text-gray-800"></h3>
                <button id="closeProjectModal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <!-- Image Gallery -->
            <div id="imageGallery" class="mb-6">
                <div id="mainImage" class="mb-4">
                    <img id="currentImage" src="" alt="" class="image-fade w-full max-h-[60vh] object-contain rounded-lg bg-gray-100">
                </div>
                <div id="thumbnails" class="flex space-x-2 overflow-x-auto pb-2">
                    <!-- Thumbnails will be inserted here -->
                </div>
            </div>
            
            <!-- Project Details -->
            <div class="space-y-4">
                <p id="modalDescription" class="text-gray-600 text-lg leading-relaxed"></p>
                <div id="modalLinks" class="flex space-x-4">
                    <!-- Links will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Popup -->
    <div id="notificationPopup" class="notification-popup">
        <div class="bg-white bg-opacity-95 backdrop-blur-md rounded-xl p-4 shadow-xl border border-white border-opacity-20 min-w-[300px]">
            <div class="flex items-center space-x-3">
                <div id="notificationIcon" class="text-2xl"></div>
                <div>
                    <div id="notificationTitle" class="font-semibold text-gray-800 text-sm"></div>
                    <div id="notificationMessage" class="text-gray-600 text-xs"></div>
                </div>
                <button id="closeNotification" class="text-gray-500 hover:text-gray-700 ml-auto text-lg">&times;</button>
            </div>
        </div>
    </div>

    <!-- Side Edit Panel -->
    <div id="sideEditPanel" class="fixed top-0 right-0 h-full w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50 overflow-y-auto">
        <div class="p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h3>
                <button id="closeSidePanel" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <div id="sideEditContent" class="space-y-4">
                <!-- Edit form will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Overlay for side panel -->
    <div id="sideEditOverlay" class="fixed inset-0 bg-black bg-opacity-30 z-40 hidden"></div>

    <!-- Admin Panel Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="admin-panel rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto text-gray-800">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ã‡∏±‡∏Ñ‡πÄ‡∏ã‡∏™ ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏£‡∏¥‡∏á</h3>
                <button id="closeAdmin" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="mb-6">
                <h4 class="text-lg font-semibold mb-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Jetniphat's Portfolio</h4>
                <div class="space-y-4">
                    <input type="text" id="adminEmail" placeholder="Username" class="w-full p-3 border rounded-lg">
                    <input type="password" id="adminPassword" placeholder="Password" class="w-full p-3 border rounded-lg">
                    <button id="loginBtn" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>

            <!-- Admin Controls -->
            <div id="adminControls" class="hidden space-y-6">
                <!-- Edit Project Form -->
                <div id="editProjectForm" class="bg-yellow-50 p-6 rounded-lg hidden mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h4>
                        <button id="cancelEdit" class="text-gray-500 hover:text-gray-700 text-xl">&times;</button>
                    </div>
                    <div class="space-y-4">
                        <input type="text" id="editProjectTitle" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                        <textarea id="editProjectDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg h-24"></textarea>
                        <select id="editProjectCategory" class="w-full p-3 border rounded-lg">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            <option value="project">‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</option>
                            <option value="learning">‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="leadership">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</option>
                            <option value="presentation">‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å</option>
                        </select>
                        <input type="number" id="editProjectOrder" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (1 = ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)" min="1" class="w-full p-3 border rounded-lg">
                        
                        <!-- Multiple Image Inputs for Edit -->
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏£‡∏π‡∏õ)</label>
                            <div class="text-xs text-gray-500 mb-2">
                                üí° ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Drive: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå ‚Üí Get link ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô "Anyone with the link can view" ‚Üí Copy link
                            </div>
                            <input type="url" id="editProjectImage1" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 1 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage2" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 2 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage3" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 3 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage4" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 4 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage5" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 5 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage6" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 6 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage7" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 7 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage8" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 8 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage9" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 9 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="editProjectImage10" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 10 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                        </div>
                        
                        <input type="url" id="editProjectLink" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                        <input type="url" id="editFacebookPost" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå Facebook (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full p-3 border rounded-lg">
                        
                        <div class="flex space-x-4">
                            <button id="updateProject" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ú‡∏•‡∏á‡∏≤‡∏ô</button>
                            <button id="deleteProject" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô</button>
                        </div>
                    </div>
                </div>

                <!-- Education Management -->
                <div class="bg-green-50 p-6 rounded-lg mb-6">
                    <h4 class="text-lg font-semibold mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h4>
                    <div class="space-y-4">
                        <input type="text" id="educationSchool" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤" class="w-full p-3 border rounded-lg">
                        <input type="text" id="educationLevel" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô ‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤, ‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤)" class="w-full p-3 border rounded-lg">
                        <input type="text" id="educationYear" placeholder="‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô 2018-2024)" class="w-full p-3 border rounded-lg">
                        
                        <!-- Program Type Selection -->
                        <div class="space-y-4">
                            <label class="block text-sm font-medium text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center space-x-2 p-3 border-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors">
                                    <input type="radio" name="programType" value="‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="program-type-radio" checked>
                                    <span class="font-medium">‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>
                                </label>
                                <label class="flex items-center space-x-2 p-3 border-2 rounded-lg hover:bg-green-50 cursor-pointer transition-colors">
                                    <input type="radio" name="programType" value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©" class="program-type-radio">
                                    <span class="font-medium">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</span>
                                </label>
                            </div>
                        </div>

                        <!-- Program Selection -->
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</label>
                            
                            <!-- ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Options -->
                            <div id="regularPrograms" class="program-options">
                                <div class="text-xs text-blue-600 font-medium mb-2">üìö ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå">
                                        <span class="text-sm">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°">
                                        <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤">
                                        <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì">
                                        <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</span>
                                    </label>
                                </div>
                            </div>

                            <!-- ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© Options -->
                            <div id="specialPrograms" class="program-options hidden">
                                <div class="text-xs text-green-600 font-medium mb-2">üåü ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ">
                                        <span class="text-sm">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="Mini English Program (MEP)">
                                        <span class="text-sm">Mini English Program (MEP)</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô">
                                        <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô">
                                        <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏®‡∏¥‡∏•‡∏õ‡πå">
                                        <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏Å‡∏µ‡∏¨‡∏≤">
                                        <span class="text-sm">‡∏Å‡∏µ‡∏¨‡∏≤</span>
                                    </label>
                                    <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                        <input type="checkbox" class="education-program" value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á">
                                        <span class="text-sm">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á</span>
                                    </label>
                                </div>
                            </div>

                            <!-- ‡∏≠‡∏∑‡πà‡∏ô‡πÜ Option -->
                            <div class="mt-3">
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" id="programOther" class="education-program" value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">
                                    <span class="text-sm">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)</span>
                                </label>
                                <input type="text" id="educationCustomProgram" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ" class="w-full p-3 border rounded-lg mt-2 hidden">
                            </div>
                        </div>
                        
                        <textarea id="educationDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" class="w-full p-3 border rounded-lg h-20"></textarea>
                        <input type="url" id="educationLogo" placeholder="URL ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                        <input type="number" id="educationOrder" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (1 = ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡πà‡∏≠‡∏ô)" min="1" class="w-full p-3 border rounded-lg">
                        <button id="addEducation" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</button>
                    </div>
                </div>

                <div class="bg-gray-100 p-6 rounded-lg">
                    <h4 class="text-lg font-semibold mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h4>
                    <div class="space-y-4">
                        <input type="text" id="projectTitle" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                        <textarea id="projectDescription" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg h-24"></textarea>
                        <select id="projectCategory" class="w-full p-3 border rounded-lg">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            <option value="project">‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</option>
                            <option value="learning">‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="leadership">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</option>
                            <option value="presentation">‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å</option>
                        </select>
                        <input type="number" id="projectOrder" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (1 = ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)" min="1" class="w-full p-3 border rounded-lg">
                        
                        <!-- Multiple Image Inputs -->
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏£‡∏π‡∏õ)</label>
                            <div class="text-xs text-gray-500 mb-2">
                                üí° ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Drive: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå ‚Üí Get link ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô "Anyone with the link can view" ‚Üí Copy link
                            </div>
                            <input type="url" id="projectImage1" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 1 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage2" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 2 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage3" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 3 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage4" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 4 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage5" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 5 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage6" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 6 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage7" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 7 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage8" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 8 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage9" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 9 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                            <input type="url" id="projectImage10" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà 10 (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Drive)" class="w-full p-3 border rounded-lg">
                        </div>
                        
                        <input type="url" id="projectLink" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                        <input type="url" id="facebookPost" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå Facebook (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" class="w-full p-3 border rounded-lg">
                        <button id="addProject" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô</button>
                    </div>
                </div>

                <button id="logoutBtn" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA2kq4e2Wkg1S5Y9PmBeR_AdJS1IcFVEuM",
            authDomain: "my-portfolio-3793d.firebaseapp.com",
            projectId: "my-portfolio-3793d",
            storageBucket: "my-portfolio-3793d.firebasestorage.app",
            messagingSenderId: ". ",
            appId: "1:. :web:f24789a694cac8146b8ce2",
            measurementId: "G-TSNH7SPLKL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        const storage = firebase.storage();

        // DOM Elements
        const adminBtn = document.getElementById('adminBtn');
        const adminModal = document.getElementById('adminModal');
        const closeAdmin = document.getElementById('closeAdmin');
        const loginForm = document.getElementById('loginForm');
        const adminControls = document.getElementById('adminControls');
        const loginBtn = document.getElementById('loginBtn');
        const logoutBtn = document.getElementById('logoutBtn');

        // Notification Elements
        const notificationPopup = document.getElementById('notificationPopup');
        const notificationIcon = document.getElementById('notificationIcon');
        const notificationTitle = document.getElementById('notificationTitle');
        const notificationMessage = document.getElementById('notificationMessage');
        const closeNotification = document.getElementById('closeNotification');

        // Project Modal Elements
        const projectModal = document.getElementById('projectModal');
        const closeProjectModal = document.getElementById('closeProjectModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalDescription = document.getElementById('modalDescription');
        const modalLinks = document.getElementById('modalLinks');
        const currentImage = document.getElementById('currentImage');
        const thumbnails = document.getElementById('thumbnails');

        // Admin session management
        let isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
        let currentEditingProjectId = null;

        // Notification System
        function showNotification(title, message, type = 'info', duration = 4000) {
            // Set content
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // Set icon and style based on type
            notificationPopup.className = 'notification-popup';
            switch(type) {
                case 'success':
                    notificationIcon.textContent = '‚úÖ';
                    notificationPopup.classList.add('success');
                    break;
                case 'error':
                    notificationIcon.textContent = '‚ùå';
                    notificationPopup.classList.add('error');
                    break;
                case 'info':
                default:
                    notificationIcon.textContent = '‚ÑπÔ∏è';
                    notificationPopup.classList.add('info');
                    break;
            }
            
            // Show notification
            notificationPopup.classList.add('show');
            
            // Auto hide after duration
            setTimeout(() => {
                hideNotification();
            }, duration);
        }

        function hideNotification() {
            notificationPopup.classList.remove('show');
        }

        // Close notification manually
        closeNotification.addEventListener('click', hideNotification);

        // Show/Hide Admin Modal
        adminBtn.addEventListener('click', () => {
            adminModal.classList.remove('hidden');
            checkAdminSession();
        });

        closeAdmin.addEventListener('click', () => {
            adminModal.classList.add('hidden');
        });

        // Project Modal Controls
        closeProjectModal.addEventListener('click', () => {
            closeProjectModalWithAnimation();
        });

        // Close modals when clicking outside
        projectModal.addEventListener('click', (e) => {
            if (e.target === projectModal) {
                closeProjectModalWithAnimation();
            }
        });

        // Function to close modal with animation
        function closeProjectModalWithAnimation() {
            const modalContent = document.getElementById('modalContent');
            
            // Remove show classes for animation
            projectModal.classList.remove('show');
            modalContent.classList.remove('show');
            
            // Hide modal after animation completes
            setTimeout(() => {
                projectModal.classList.add('hidden');
            }, 400);
        }

        adminModal.addEventListener('click', (e) => {
            if (e.target === adminModal) {
                adminModal.classList.add('hidden');
            }
        });

        // Show Project Detail Modal
        function showProjectDetail(project) {
            modalTitle.textContent = project.title;
            modalDescription.textContent = project.description;
            
            // Handle images
            const images = [];
            for (let i = 1; i <= 10; i++) {
                if (project[`image${i}`] && project[`image${i}`].trim()) {
                    images.push(project[`image${i}`]);
                }
            }
            
            if (images.length > 0) {
                // Convert Google Drive URLs and show first image as main
                const convertedImages = images.map(img => convertGoogleDriveUrl(img));
                currentImage.src = convertedImages[0];
                currentImage.alt = project.title;
                currentImage.dataset.originalUrl = images[0];
                currentImage.onerror = function() { handleImageError(this, this.dataset.originalUrl); };
                
                // Create thumbnails
                thumbnails.innerHTML = '';
                convertedImages.forEach((img, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = img;
                    thumb.alt = `${project.title} - ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà ${index + 1}`;
                    thumb.className = `thumbnail thumbnail-hover w-16 h-16 object-cover rounded-lg ${index === 0 ? 'active' : ''}`;
                    thumb.dataset.originalUrl = images[index];
                    thumb.onerror = function() { handleImageError(this, this.dataset.originalUrl); };
                    thumb.addEventListener('click', () => {
                        // Fade out current image
                        currentImage.style.opacity = '0';
                        
                        setTimeout(() => {
                            currentImage.src = img;
                            currentImage.dataset.originalUrl = images[index];
                            currentImage.onerror = function() { handleImageError(this, this.dataset.originalUrl); };
                            currentImage.style.opacity = '1';
                            
                            // Update active thumbnail
                            thumbnails.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                            thumb.classList.add('active');
                        }, 150);
                    });
                    thumbnails.appendChild(thumb);
                });
            } else {
                // No images, show placeholder
                currentImage.src = '';
                currentImage.alt = '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û';
                thumbnails.innerHTML = '<div class="w-full text-center text-gray-500 py-4">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>';
            }
            
            // Handle links
            modalLinks.innerHTML = '';
            if (project.link) {
                const projectLink = document.createElement('a');
                projectLink.href = project.link;
                projectLink.target = '_blank';
                projectLink.rel = 'noopener noreferrer';
                projectLink.className = 'bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors transform hover:scale-105';
                projectLink.textContent = '‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ';
                modalLinks.appendChild(projectLink);
            }
            
            if (project.facebookPost) {
                const fbLink = document.createElement('a');
                fbLink.href = project.facebookPost;
                fbLink.target = '_blank';
                fbLink.rel = 'noopener noreferrer';
                fbLink.className = 'bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg transition-colors transform hover:scale-105';
                fbLink.textContent = 'Facebook';
                modalLinks.appendChild(fbLink);
            }
            
            // Show modal with animation
            projectModal.classList.remove('hidden');
            const modalContent = document.getElementById('modalContent');
            
            // Force reflow
            projectModal.offsetHeight;
            
            // Add show classes for animation
            setTimeout(() => {
                projectModal.classList.add('show');
                modalContent.classList.add('show');
            }, 10);
        }

        // Check admin session on modal open
        function checkAdminSession() {
            if (isAdminLoggedIn) {
                loginForm.classList.add('hidden');
                adminControls.classList.remove('hidden');
                // Show admin sort controls
                document.getElementById('adminSortControls').classList.remove('hidden');
            } else {
                loginForm.classList.remove('hidden');
                adminControls.classList.add('hidden');
                // Hide admin sort controls
                document.getElementById('adminSortControls').classList.add('hidden');
            }
        }

        // Admin Login
        loginBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            const username = document.getElementById('adminEmail').value.trim();
            const password = document.getElementById('adminPassword').value.trim();

            if (!username || !password) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Username ‡πÅ‡∏•‡∏∞ Password', 'error');
                return;
            }

            // Show loading state
            const originalText = loginBtn.textContent;
            loginBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...';
            loginBtn.disabled = true;

            try {
                // Get admin credentials from Firebase
                const adminDoc = await db.collection('admin').doc('credentials').get();
                
                if (!adminDoc.exists) {
                    throw new Error('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö');
                }

                const adminData = adminDoc.data();
                
                if (username === adminData.username && password === adminData.password) {
                    isAdminLoggedIn = true;
                    localStorage.setItem('adminLoggedIn', 'true');
                    localStorage.setItem('adminLoginTime', Date.now().toString());
                    
                    loginForm.classList.add('hidden');
                    adminControls.classList.remove('hidden');
                    // Show admin sort controls
                    document.getElementById('adminSortControls').classList.remove('hidden');
                    loadAdminData();
                    showNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö Admin', 'success');
                    
                    // Clear login form
                    document.getElementById('adminEmail').value = '';
                    document.getElementById('adminPassword').value = '';
                } else {
                    showNotification('‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'Username ‡∏´‡∏£‡∏∑‡∏≠ Password ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', 'error');
                }
            } catch (error) {
                console.error('Login error:', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            } finally {
                // Reset button state
                loginBtn.textContent = originalText;
                loginBtn.disabled = false;
            }
        });

        // Admin Logout
        logoutBtn.addEventListener('click', () => {
            isAdminLoggedIn = false;
            localStorage.removeItem('adminLoggedIn');
            localStorage.removeItem('adminLoginTime');
            
            loginForm.classList.remove('hidden');
            adminControls.classList.add('hidden');
            // Hide admin sort controls
            document.getElementById('adminSortControls').classList.add('hidden');
            // Disable sort mode if active
            if (isSortMode) {
                disableSortMode();
            }
            showNotification('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Admin Panel', 'info');
        });

        // Check session validity (optional: auto-logout after 7 days)
        function checkSessionValidity() {
            const loginTime = localStorage.getItem('adminLoginTime');
            if (loginTime) {
                const daysSinceLogin = (Date.now() - parseInt(loginTime)) / (1000 * 60 * 60 * 24);
                if (daysSinceLogin > 7) {
                    // Auto logout after 7 days
                    isAdminLoggedIn = false;
                    localStorage.removeItem('adminLoggedIn');
                    localStorage.removeItem('adminLoginTime');
                }
            }
        }

        // Side Panel Elements
        const sideEditPanel = document.getElementById('sideEditPanel');
        const sideEditOverlay = document.getElementById('sideEditOverlay');
        const closeSidePanel = document.getElementById('closeSidePanel');
        const sideEditContent = document.getElementById('sideEditContent');

        // Edit Project Functions - Side panel editing
        function editProject(projectId) {
            const project = allProjects.find(p => p.id === projectId);
            if (!project) return;

            // Create side edit form
            const editForm = createSideEditForm(project, projectId);
            
            // Insert form into side panel
            sideEditContent.innerHTML = editForm;
            
            // Show side panel
            showSidePanel();
        }

        // Show side panel
        function showSidePanel() {
            sideEditOverlay.classList.remove('hidden');
            sideEditPanel.classList.remove('translate-x-full');
            document.body.style.paddingRight = '384px'; // 96 * 4 = 384px (w-96)
            document.body.style.transition = 'padding-right 0.3s ease';
        }

        // Hide side panel
        function hideSidePanel() {
            sideEditOverlay.classList.add('hidden');
            sideEditPanel.classList.add('translate-x-full');
            document.body.style.paddingRight = '0';
        }

        // Close side panel events
        closeSidePanel.addEventListener('click', hideSidePanel);
        sideEditOverlay.addEventListener('click', hideSidePanel);

        // Create side edit form
        function createSideEditForm(project, projectId) {
            return `
                <div class="space-y-4">
                    <input type="text" id="side-title-${projectId}" value="${project.title || ''}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                    
                    <textarea id="side-description-${projectId}" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg h-24">${project.description || ''}</textarea>
                    
                    <select id="side-category-${projectId}" class="w-full p-3 border rounded-lg">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                        <option value="project" ${project.category === 'project' ? 'selected' : ''}>‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</option>
                        <option value="learning" ${project.category === 'learning' ? 'selected' : ''}>‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</option>
                        <option value="leadership" ${project.category === 'leadership' ? 'selected' : ''}>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</option>
                        <option value="presentation" ${project.category === 'presentation' ? 'selected' : ''}>‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å</option>
                    </select>
                    
                    <input type="number" id="side-order-${projectId}" value="${project.order || ''}" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç" min="1" class="w-full p-3 border rounded-lg">
                    
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏£‡∏π‡∏õ)</label>
                        <div class="text-xs text-gray-500 mb-2">
                            üí° ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Google Drive: ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå ‚Üí Get link ‚Üí ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô "Anyone with the link can view" ‚Üí Copy link
                        </div>
                        ${Array.from({length: 10}, (_, i) => `
                            <input type="url" id="side-image${i+1}-${projectId}" value="${project[`image${i+1}`] || ''}" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà ${i+1}" class="w-full p-2 border rounded text-sm">
                        `).join('')}
                    </div>
                    
                    <input type="url" id="side-link-${projectId}" value="${project.link || ''}" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-3 border rounded-lg">
                    
                    <input type="url" id="side-facebook-${projectId}" value="${project.facebookPost || ''}" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå Facebook" class="w-full p-3 border rounded-lg">
                    
                    <div class="flex flex-col space-y-2 pt-4">
                        <button onclick="saveSideEdit('${projectId}')" class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button onclick="deleteSideProject('${projectId}')" class="bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors font-semibold">‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô</button>
                        <button onclick="hideSidePanel()" class="bg-gray-500 text-white px-4 py-3 rounded-lg hover:bg-gray-600 transition-colors font-semibold">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    </div>
                </div>
            `;
        }

        // Create inline edit form (legacy - keep for compatibility)
        function createInlineEditForm(project, projectId) {
            return `
                <div class="p-4">
                    <div class="flex justify-between items-center mb-4">
                        <h4 class="text-lg font-bold text-gray-800">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h4>
                        <button onclick="cancelInlineEdit('${projectId}')" class="text-gray-500 hover:text-gray-700 text-xl">&times;</button>
                    </div>
                    
                    <div class="space-y-3">
                        <input type="text" id="inline-title-${projectId}" value="${project.title || ''}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-2 border rounded text-sm">
                        
                        <textarea id="inline-description-${projectId}" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-2 border rounded text-sm h-20">${project.description || ''}</textarea>
                        
                        <select id="inline-category-${projectId}" class="w-full p-2 border rounded text-sm">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
                            <option value="project" ${project.category === 'project' ? 'selected' : ''}>‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</option>
                            <option value="learning" ${project.category === 'learning' ? 'selected' : ''}>‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</option>
                            <option value="leadership" ${project.category === 'leadership' ? 'selected' : ''}>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏ô‡∏≥</option>
                            <option value="presentation" ${project.category === 'presentation' ? 'selected' : ''}>‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≠‡∏Å</option>
                        </select>
                        
                        <input type="number" id="inline-order-${projectId}" value="${project.order || ''}" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç" min="1" class="w-full p-2 border rounded text-sm">
                        
                        <div class="space-y-2">
                            <label class="block text-xs font-medium text-gray-700">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏£‡∏π‡∏õ)</label>
                            ${Array.from({length: 10}, (_, i) => `
                                <input type="url" id="inline-image${i+1}-${projectId}" value="${project[`image${i+1}`] || ''}" placeholder="URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà ${i+1}" class="w-full p-2 border rounded text-xs">
                            `).join('')}
                        </div>
                        
                        <input type="url" id="inline-link-${projectId}" value="${project.link || ''}" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ" class="w-full p-2 border rounded text-sm">
                        
                        <input type="url" id="inline-facebook-${projectId}" value="${project.facebookPost || ''}" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏û‡∏™‡∏ï‡πå Facebook" class="w-full p-2 border rounded text-sm">
                        
                        <div class="flex space-x-2 pt-2">
                            <button onclick="saveInlineEdit('${projectId}')" class="bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors flex-1">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                            <button onclick="deleteInlineProject('${projectId}')" class="bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors">‡∏•‡∏ö</button>
                            <button onclick="cancelInlineEdit('${projectId}')" class="bg-gray-500 text-white px-4 py-2 rounded text-sm hover:bg-gray-600 transition-colors">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Side panel edit functions
        async function saveSideEdit(projectId) {
            const title = document.getElementById(`side-title-${projectId}`).value.trim();
            const description = document.getElementById(`side-description-${projectId}`).value.trim();
            const category = document.getElementById(`side-category-${projectId}`).value;
            const order = parseInt(document.getElementById(`side-order-${projectId}`).value) || 999;
            const link = document.getElementById(`side-link-${projectId}`).value.trim();
            const facebookPost = document.getElementById(`side-facebook-${projectId}`).value.trim();

            // Collect images
            const images = {};
            for (let i = 1; i <= 10; i++) {
                const imageUrl = document.getElementById(`side-image${i}-${projectId}`).value.trim();
                images[`image${i}`] = imageUrl || '';
            }

            if (!title || !description || !category) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ', 'error');
                return;
            }

            // Show loading state
            const saveButton = document.querySelector(`button[onclick="saveSideEdit('${projectId}')"]`);
            const originalText = saveButton.textContent;
            saveButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            saveButton.disabled = true;

            try {
                // Update project in Firestore
                const projectData = {
                    title: title,
                    description: description,
                    category: category,
                    order: order,
                    link: link || '',
                    facebookPost: facebookPost || '',
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    ...images
                };

                await db.collection('projects').doc(projectId).update(projectData);

                // Update local data
                const projectIndex = allProjects.findIndex(p => p.id === projectId);
                if (projectIndex !== -1) {
                    allProjects[projectIndex] = { ...allProjects[projectIndex], ...projectData };
                }

                // Re-display projects with updated data
                displayProjects(allProjects);
                
                // Hide side panel
                hideSidePanel();
                
                showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error updating project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                // Reset button state on error
                saveButton.textContent = originalText;
                saveButton.disabled = false;
            }
        }

        async function deleteSideProject(projectId) {
            const confirmDelete = confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ');
            if (!confirmDelete) return;

            // Show loading state
            const deleteButton = document.querySelector(`button[onclick="deleteSideProject('${projectId}')"]`);
            const originalText = deleteButton.textContent;
            deleteButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...';
            deleteButton.disabled = true;

            try {
                await db.collection('projects').doc(projectId).delete();

                // Remove from local data
                allProjects = allProjects.filter(p => p.id !== projectId);

                // Re-display projects
                displayProjects(allProjects);
                
                // Hide side panel
                hideSidePanel();
                
                showNotification('‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error deleting project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                // Reset button state on error
                deleteButton.textContent = originalText;
                deleteButton.disabled = false;
            }
        }

        // Inline edit functions (legacy)
        function cancelInlineEdit(projectId) {
            // Reload projects to restore original card
            displayProjects(allProjects);
        }

        async function saveInlineEdit(projectId) {
            const title = document.getElementById(`inline-title-${projectId}`).value.trim();
            const description = document.getElementById(`inline-description-${projectId}`).value.trim();
            const category = document.getElementById(`inline-category-${projectId}`).value;
            const order = parseInt(document.getElementById(`inline-order-${projectId}`).value) || 999;
            const link = document.getElementById(`inline-link-${projectId}`).value.trim();
            const facebookPost = document.getElementById(`inline-facebook-${projectId}`).value.trim();

            // Collect images
            const images = {};
            for (let i = 1; i <= 10; i++) {
                const imageUrl = document.getElementById(`inline-image${i}-${projectId}`).value.trim();
                images[`image${i}`] = imageUrl || '';
            }

            if (!title || !description || !category) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ', 'error');
                return;
            }

            // Show loading state
            const saveButton = document.querySelector(`button[onclick="saveInlineEdit('${projectId}')"]`);
            const originalText = saveButton.textContent;
            saveButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            saveButton.disabled = true;

            try {
                // Update project in Firestore
                const projectData = {
                    title: title,
                    description: description,
                    category: category,
                    order: order,
                    link: link || '',
                    facebookPost: facebookPost || '',
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    ...images
                };

                await db.collection('projects').doc(projectId).update(projectData);

                // Update local data
                const projectIndex = allProjects.findIndex(p => p.id === projectId);
                if (projectIndex !== -1) {
                    allProjects[projectIndex] = { ...allProjects[projectIndex], ...projectData };
                }

                // Re-display projects with updated data
                displayProjects(allProjects);
                
                showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error updating project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                // Reset button state on error
                saveButton.textContent = originalText;
                saveButton.disabled = false;
            }
        }

        async function deleteInlineProject(projectId) {
            const confirmDelete = confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ');
            if (!confirmDelete) return;

            // Show loading state
            const deleteButton = document.querySelector(`button[onclick="deleteInlineProject('${projectId}')"]`);
            const originalText = deleteButton.textContent;
            deleteButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...';
            deleteButton.disabled = true;

            try {
                await db.collection('projects').doc(projectId).delete();

                // Remove from local data
                allProjects = allProjects.filter(p => p.id !== projectId);

                // Re-display projects
                displayProjects(allProjects);
                
                showNotification('‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error deleting project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                // Reset button state on error
                deleteButton.textContent = originalText;
                deleteButton.disabled = false;
            }
        }

        // Cancel Edit (legacy - keep for compatibility)
        document.getElementById('cancelEdit').addEventListener('click', () => {
            document.getElementById('editProjectForm').classList.add('hidden');
            currentEditingProjectId = null;
        });

        // Update Project
        document.getElementById('updateProject').addEventListener('click', async (e) => {
            e.preventDefault();
            
            if (!currentEditingProjectId) return;

            const title = document.getElementById('editProjectTitle').value.trim();
            const description = document.getElementById('editProjectDescription').value.trim();
            const category = document.getElementById('editProjectCategory').value;
            const order = parseInt(document.getElementById('editProjectOrder').value) || 999;
            const link = document.getElementById('editProjectLink').value.trim();
            const facebookPost = document.getElementById('editFacebookPost').value.trim();

            // Collect images
            const images = {};
            for (let i = 1; i <= 10; i++) {
                const imageUrl = document.getElementById(`editProjectImage${i}`).value.trim();
                images[`image${i}`] = imageUrl || '';
            }

            if (!title || !description || !category) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ', 'error');
                return;
            }

            // Show loading state
            const updateButton = document.getElementById('updateProject');
            const originalText = updateButton.textContent;
            updateButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï...';
            updateButton.disabled = true;

            try {
                // Update project in Firestore
                const projectData = {
                    title: title,
                    description: description,
                    category: category,
                    order: order,
                    link: link || '',
                    facebookPost: facebookPost || '',
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    ...images
                };

                await db.collection('projects').doc(currentEditingProjectId).update(projectData);

                console.log('Project updated with ID: ', currentEditingProjectId);

                // Hide edit form
                document.getElementById('editProjectForm').classList.add('hidden');
                currentEditingProjectId = null;

                // Reload projects
                await loadProjects();
                
                alert('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            } catch (error) {
                console.error('Error updating project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            } finally {
                // Reset button state
                updateButton.textContent = originalText;
                updateButton.disabled = false;
            }
        });

        // Delete Project
        document.getElementById('deleteProject').addEventListener('click', async (e) => {
            e.preventDefault();
            
            if (!currentEditingProjectId) return;

            const confirmDelete = confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ');
            if (!confirmDelete) return;

            // Show loading state
            const deleteButton = document.getElementById('deleteProject');
            const originalText = deleteButton.textContent;
            deleteButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...';
            deleteButton.disabled = true;

            try {
                await db.collection('projects').doc(currentEditingProjectId).delete();

                console.log('Project deleted with ID: ', currentEditingProjectId);

                // Hide edit form
                document.getElementById('editProjectForm').classList.add('hidden');
                currentEditingProjectId = null;

                // Reload projects
                await loadProjects();
                
                alert('‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            } catch (error) {
                console.error('Error deleting project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            } finally {
                // Reset button state
                deleteButton.textContent = originalText;
                deleteButton.disabled = false;
            }
        });

        // Add Project
        document.getElementById('addProject').addEventListener('click', async (e) => {
            e.preventDefault();
            
            const title = document.getElementById('projectTitle').value.trim();
            const description = document.getElementById('projectDescription').value.trim();
            const category = document.getElementById('projectCategory').value;
            const order = parseInt(document.getElementById('projectOrder').value) || 999;
            const link = document.getElementById('projectLink').value.trim();
            const facebookPost = document.getElementById('facebookPost').value.trim();

            // Collect images
            const images = {};
            for (let i = 1; i <= 10; i++) {
                const imageUrl = document.getElementById(`projectImage${i}`).value.trim();
                if (imageUrl) {
                    images[`image${i}`] = imageUrl;
                }
            }

            if (!title || !description || !category) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ', 'error');
                return;
            }

            // Show loading state
            const addButton = document.getElementById('addProject');
            const originalText = addButton.textContent;
            addButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°...';
            addButton.disabled = true;

            try {
                // Add project to Firestore
                const projectData = {
                    title: title,
                    description: description,
                    category: category,
                    order: order,
                    link: link || '',
                    facebookPost: facebookPost || '',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    ...images
                };

                const docRef = await db.collection('projects').add(projectData);

                console.log('Project added with ID: ', docRef.id);

                // Clear form
                document.getElementById('projectTitle').value = '';
                document.getElementById('projectDescription').value = '';
                document.getElementById('projectCategory').value = '';
                document.getElementById('projectOrder').value = '';
                document.getElementById('projectLink').value = '';
                document.getElementById('facebookPost').value = '';
                
                // Clear image inputs
                for (let i = 1; i <= 10; i++) {
                    document.getElementById(`projectImage${i}`).value = '';
                }

                // Reload projects
                await loadProjects();
                
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error adding project: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            } finally {
                // Reset button state
                addButton.textContent = originalText;
                addButton.disabled = false;
            }
        });

        // Profile data is now static - no database loading needed

        // Global projects array
        let allProjects = [];
        
        // Global education array
        let allEducation = [];
        
        // Drag and Drop Variables
        let isSortMode = false;
        let draggedElement = null;
        let originalOrder = [];
        let currentFilter = 'all';

        // Load Education
        async function loadEducation() {
            try {
                const snapshot = await db.collection('education').get();
                allEducation = [];

                snapshot.forEach(doc => {
                    allEducation.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });

                // Sort by order first, then by creation date
                allEducation.sort((a, b) => {
                    if (a.order !== b.order) {
                        return (a.order || 999) - (b.order || 999);
                    }
                    return (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0);
                });

                displayEducation(allEducation);
                console.log(`Loaded ${snapshot.size} education records`);
            } catch (error) {
                console.error('Error loading education:', error);
                const educationTimeline = document.getElementById('educationTimeline');
                educationTimeline.innerHTML = '<div class="text-center text-red-500 py-8">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>';
            }
        }

        // Display Education Timeline
        function displayEducation(educationList) {
            const timeline = document.getElementById('educationTimeline');
            timeline.innerHTML = '';

            if (educationList.length === 0) {
                timeline.innerHTML = '<div class="text-center text-gray-500 py-8">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</div>';
                return;
            }

            educationList.forEach((edu, index) => {
                const timelineItem = createEducationItem(edu, index);
                timeline.appendChild(timelineItem);
                
                // Animate items with delay
                setTimeout(() => {
                    timelineItem.classList.add('animate');
                }, index * 200);
            });
        }

        // Create Education Timeline Item
        function createEducationItem(education, index) {
            const isLeft = index % 2 === 0;
            const item = document.createElement('div');
            item.className = `timeline-item relative flex items-center ${isLeft ? 'justify-start' : 'justify-end'} mb-12`;
            
            const logoUrl = education.logo ? convertGoogleDriveUrl(education.logo) : '';
            
            item.innerHTML = `
                <div class="timeline-content bg-white bg-opacity-90 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-blue-100 max-w-md ${isLeft ? 'mr-8' : 'ml-8'} relative">
                    ${isAdminLoggedIn ? `<button class="edit-education-btn absolute top-2 right-2 bg-yellow-500 hover:bg-yellow-600 text-white p-2 rounded-full text-sm transition-colors z-10" data-education-id="${education.id}">‚úèÔ∏è</button>` : ''}
                    <div class="flex items-center mb-4">
                        ${logoUrl ? `<img src="${logoUrl}" alt="${education.school}" class="school-logo mr-4" data-original-url="${education.logo || ''}" onerror="handleImageError(this, this.dataset.originalUrl)">` : '<div class="school-logo mr-4 bg-gradient-to-r from-blue-400 to-blue-600 flex items-center justify-center text-white text-2xl">üè´</div>'}
                        <div>
                            <h4 class="text-xl font-bold text-gray-800">${education.school}</h4>
                            <p class="text-blue-600 font-semibold">${education.level}</p>
                        </div>
                    </div>
                    <div class="text-gray-600 mb-2">
                        <span class="font-semibold">‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤:</span> ${education.year}
                    </div>
                    ${education.programs && education.programs.length > 0 ? `
                        <div class="mb-3">
                            <span class="font-semibold text-gray-700">${(() => {
                                // Determine the type based on programs
                                const regularPrograms = ['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'];
                                const specialPrograms = ['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', 'Mini English Program (MEP)', '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô', '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô', '‡∏®‡∏¥‡∏•‡∏õ‡πå', '‡∏Å‡∏µ‡∏¨‡∏≤', '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á'];
                                
                                const hasRegularProgram = education.programs.some(p => regularPrograms.includes(p));
                                const hasSpecialProgram = education.programs.some(p => specialPrograms.includes(p));
                                
                                if (hasSpecialProgram && !hasRegularProgram) {
                                    return '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:';
                                } else if (hasRegularProgram && !hasSpecialProgram) {
                                    return '‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:';
                                } else {
                                    return '‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©:';
                                }
                            })()}</span>
                            <div class="flex flex-wrap gap-2 mt-1">
                                ${education.programs.map(program => {
                                    // Determine if it's a regular program or special program
                                    const regularPrograms = ['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'];
                                    const specialPrograms = ['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', 'Mini English Program (MEP)', '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô', '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô', '‡∏®‡∏¥‡∏•‡∏õ‡πå', '‡∏Å‡∏µ‡∏¨‡∏≤', '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á'];
                                    
                                    let badgeClass = 'bg-gray-100 text-gray-800'; // default for custom programs
                                    let icon = '';
                                    
                                    if (regularPrograms.includes(program)) {
                                        badgeClass = 'bg-blue-100 text-blue-800';
                                        icon = 'üìö ';
                                    } else if (specialPrograms.includes(program)) {
                                        badgeClass = 'bg-green-100 text-green-800';
                                        icon = '';
                                    }
                                    
                                    return `<span class="${badgeClass} px-3 py-1 rounded-full text-sm font-medium">${icon}${program}</span>`;
                                }).join('')}
                            </div>
                        </div>
                    ` : ''}
                    ${education.description ? `<p class="text-gray-600">${education.description}</p>` : ''}
                    
                    <!-- Timeline connector -->
                    <div class="absolute top-1/2 ${isLeft ? '-right-4' : '-left-4'} transform -translate-y-1/2">
                        <div class="timeline-dot"></div>
                    </div>
                </div>
            `;
            
            // Add edit button event listener
            const editBtn = item.querySelector('.edit-education-btn');
            if (editBtn) {
                editBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    editEducation(education.id);
                });
            }
            
            return item;
        }

        // Edit Education Function
        function editEducation(educationId) {
            const education = allEducation.find(e => e.id === educationId);
            if (!education) return;

            const editForm = createEducationEditForm(education, educationId);
            sideEditContent.innerHTML = editForm;
            setupEducationProgramHandlers(educationId);
            showSidePanel();
        }

        // Create Education Edit Form
        function createEducationEditForm(education, educationId) {
            const programs = education.programs || [];
            const programOptions = [
                '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå',
                '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ',
                'Mini English Program (MEP)',
                '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô',
                '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô',
                '‡∏®‡∏¥‡∏•‡∏õ‡πå',
                '‡∏Å‡∏µ‡∏¨‡∏≤',
                '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á',
                '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',
                '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'
            ];
            
            return `
                <div class="space-y-4">
                    <h4 class="text-lg font-bold text-gray-800 mb-4">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h4>
                    
                    <input type="text" id="side-school-${educationId}" value="${education.school || ''}" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤" class="w-full p-3 border rounded-lg">
                    
                    <input type="text" id="side-level-${educationId}" value="${education.level || ''}" placeholder="‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤" class="w-full p-3 border rounded-lg">
                    
                    <input type="text" id="side-year-${educationId}" value="${education.year || ''}" placeholder="‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤" class="w-full p-3 border rounded-lg">
                    
                    <!-- Program Type Selection for Edit -->
                    <div class="space-y-4">
                        <label class="block text-sm font-medium text-gray-700">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center space-x-2 p-3 border-2 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors">
                                <input type="radio" name="editProgramType-${educationId}" value="‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="edit-program-type-radio-${educationId}" checked>
                                <span class="font-medium">‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>
                            </label>
                            <label class="flex items-center space-x-2 p-3 border-2 rounded-lg hover:bg-green-50 cursor-pointer transition-colors">
                                <input type="radio" name="editProgramType-${educationId}" value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©" class="edit-program-type-radio-${educationId}">
                                <span class="font-medium">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</span>
                            </label>
                        </div>
                    </div>

                    <!-- Program Selection for Edit -->
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</label>
                        
                        <!-- ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô Options -->
                        <div id="editRegularPrograms-${educationId}" class="edit-program-options">
                            <div class="text-xs text-blue-600 font-medium mb-2">üìö ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</div>
                            <div class="grid grid-cols-1 gap-2">
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå" ${programs.includes('‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°" ${programs.includes('‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤" ${programs.includes('‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì" ${programs.includes('‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</span>
                                </label>
                            </div>
                        </div>

                        <!-- ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏© Options -->
                        <div id="editSpecialPrograms-${educationId}" class="edit-program-options hidden">
                            <div class="text-xs text-green-600 font-medium mb-2">üåü ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</div>
                            <div class="grid grid-cols-1 gap-2">
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ" ${programs.includes('‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="Mini English Program (MEP)" ${programs.includes('Mini English Program (MEP)') ? 'checked' : ''}>
                                    <span class="text-sm">Mini English Program (MEP)</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô" ${programs.includes('‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô" ${programs.includes('‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏®‡∏¥‡∏•‡∏õ‡πå" ${programs.includes('‡∏®‡∏¥‡∏•‡∏õ‡πå') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏®‡∏¥‡∏•‡∏õ‡πå</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏Å‡∏µ‡∏¨‡∏≤" ${programs.includes('‡∏Å‡∏µ‡∏¨‡∏≤') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏Å‡∏µ‡∏¨‡∏≤</span>
                                </label>
                                <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á" ${programs.includes('‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á') ? 'checked' : ''}>
                                    <span class="text-sm">‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á</span>
                                </label>
                            </div>
                        </div>

                        <!-- ‡∏≠‡∏∑‡πà‡∏ô‡πÜ Option -->
                        <div class="mt-3">
                            <label class="flex items-center space-x-2 p-2 border rounded-lg hover:bg-gray-50 cursor-pointer">
                                <input type="checkbox" class="edit-education-program-${educationId}" value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ" ${programs.includes('‡∏≠‡∏∑‡πà‡∏ô‡πÜ') ? 'checked' : ''}>
                                <span class="text-sm">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)</span>
                            </label>
                            <input type="text" id="side-custom-program-${educationId}" value="${programs.find(p => !['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', '‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©', '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô', '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô', '‡∏®‡∏¥‡∏•‡∏õ‡πå', '‡∏Å‡∏µ‡∏¨‡∏≤', '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'].includes(p)) || ''}" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡πÜ" class="w-full p-2 border rounded-lg text-sm mt-2 ${programs.includes('‡∏≠‡∏∑‡πà‡∏ô‡πÜ') || programs.find(p => !['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì', '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ', 'Mini English Program (MEP)', '‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô', '‡∏†‡∏≤‡∏©‡∏≤‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô', '‡∏®‡∏¥‡∏•‡∏õ‡πå', '‡∏Å‡∏µ‡∏¨‡∏≤', '‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏Å‡πà‡∏á', '‡∏≠‡∏∑‡πà‡∏ô‡πÜ'].includes(p)) ? '' : 'hidden'}">
                        </div>
                    </div>
                    
                    <textarea id="side-edu-description-${educationId}" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°" class="w-full p-3 border rounded-lg h-20">${education.description || ''}</textarea>
                    
                    <input type="url" id="side-logo-${educationId}" value="${education.logo || ''}" placeholder="URL ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô" class="w-full p-3 border rounded-lg">
                    
                    <input type="number" id="side-edu-order-${educationId}" value="${education.order || ''}" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•" min="1" class="w-full p-3 border rounded-lg">
                    
                    <div class="flex flex-col space-y-2 pt-4">
                        <button onclick="saveEducationEdit('${educationId}')" class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                        <button onclick="deleteEducation('${educationId}')" class="bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors font-semibold">‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</button>
                        <button onclick="hideSidePanel()" class="bg-gray-500 text-white px-4 py-3 rounded-lg hover:bg-gray-600 transition-colors font-semibold">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    </div>
                </div>
                

            `;
        }

        // Handle education program checkboxes
        function setupEducationProgramHandlers(educationId) {
            setTimeout(() => {
                const checkboxes = document.querySelectorAll(`.edit-education-program-${educationId}`);
                const customInput = document.getElementById(`side-custom-program-${educationId}`);
                const programTypeRadios = document.querySelectorAll(`.edit-program-type-radio-${educationId}`);
                const regularPrograms = document.getElementById(`editRegularPrograms-${educationId}`);
                const specialPrograms = document.getElementById(`editSpecialPrograms-${educationId}`);
                
                // Handle program type change
                programTypeRadios.forEach(radio => {
                    radio.addEventListener('change', function() {
                        if (this.value === '‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô') {
                            regularPrograms.classList.remove('hidden');
                            specialPrograms.classList.add('hidden');
                        } else {
                            regularPrograms.classList.add('hidden');
                            specialPrograms.classList.remove('hidden');
                        }
                    });
                });
                
                // Set initial state based on existing programs
                const programs = [];
                checkboxes.forEach(cb => {
                    if (cb.checked) programs.push(cb.value);
                });
                
                const regularProgramsList = ['‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå-‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå', '‡∏†‡∏≤‡∏©‡∏≤-‡∏™‡∏±‡∏á‡∏Ñ‡∏°', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏†‡∏≤‡∏©‡∏≤', '‡∏®‡∏¥‡∏•‡∏õ‡πå-‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì'];
                const hasRegularProgram = programs.some(p => regularProgramsList.includes(p));
                
                if (!hasRegularProgram && programs.length > 0) {
                    // Has special programs, switch to special tab
                    const specialRadio = document.querySelector(`.edit-program-type-radio-${educationId}[value="‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©"]`);
                    if (specialRadio) {
                        specialRadio.checked = true;
                        regularPrograms.classList.add('hidden');
                        specialPrograms.classList.remove('hidden');
                    }
                }
                
                checkboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        if (this.value === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ') {
                            if (this.checked) {
                                customInput.classList.remove('hidden');
                            } else {
                                customInput.classList.add('hidden');
                                customInput.value = '';
                            }
                        }
                    });
                });
            }, 100);
        }

        // Save Education Edit
        async function saveEducationEdit(educationId) {
            const school = document.getElementById(`side-school-${educationId}`).value.trim();
            const level = document.getElementById(`side-level-${educationId}`).value.trim();
            const year = document.getElementById(`side-year-${educationId}`).value.trim();
            const description = document.getElementById(`side-edu-description-${educationId}`).value.trim();
            const logo = document.getElementById(`side-logo-${educationId}`).value.trim();
            const order = parseInt(document.getElementById(`side-edu-order-${educationId}`).value) || 999;

            // Collect selected programs
            const selectedPrograms = [];
            const programCheckboxes = document.querySelectorAll(`.edit-education-program-${educationId}:checked`);
            programCheckboxes.forEach(checkbox => {
                if (checkbox.value === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ') {
                    const customProgram = document.getElementById(`side-custom-program-${educationId}`).value.trim();
                    if (customProgram) {
                        selectedPrograms.push(customProgram);
                    }
                } else {
                    selectedPrograms.push(checkbox.value);
                }
            });

            if (!school || !level || !year) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÅ‡∏•‡∏∞‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤', 'error');
                return;
            }

            const saveButton = document.querySelector(`button[onclick="saveEducationEdit('${educationId}')"]`);
            const originalText = saveButton.textContent;
            saveButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...';
            saveButton.disabled = true;

            try {
                const educationData = {
                    school: school,
                    level: level,
                    year: year,
                    description: description,
                    logo: logo || '',
                    order: order,
                    programs: selectedPrograms,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                await db.collection('education').doc(educationId).update(educationData);

                const educationIndex = allEducation.findIndex(e => e.id === educationId);
                if (educationIndex !== -1) {
                    allEducation[educationIndex] = { ...allEducation[educationIndex], ...educationData };
                }

                displayEducation(allEducation);
                hideSidePanel();
                
                showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error updating education: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                saveButton.textContent = originalText;
                saveButton.disabled = false;
            }
        }

        // Delete Education
        async function deleteEducation(educationId) {
            const confirmDelete = confirm('‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ô‡∏µ‡πâ? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ');
            if (!confirmDelete) return;

            const deleteButton = document.querySelector(`button[onclick="deleteEducation('${educationId}')"]`);
            const originalText = deleteButton.textContent;
            deleteButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö...';
            deleteButton.disabled = true;

            try {
                await db.collection('education').doc(educationId).delete();

                allEducation = allEducation.filter(e => e.id !== educationId);
                displayEducation(allEducation);
                hideSidePanel();
                
                showNotification('‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error deleting education: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ: ' + error.message, 'error');
                
                deleteButton.textContent = originalText;
                deleteButton.disabled = false;
            }
        }

        // Load Projects
        async function loadProjects() {
            try {
                const snapshot = await db.collection('projects').get();
                allProjects = [];

                snapshot.forEach(doc => {
                    allProjects.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });

                // Sort by order first, then by creation date
                allProjects.sort((a, b) => {
                    if (a.order !== b.order) {
                        return (a.order || 999) - (b.order || 999);
                    }
                    // If orders are the same, sort by creation date (newest first)
                    return (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0);
                });

                displayProjects(allProjects);
                console.log(`Loaded ${snapshot.size} projects`);
            } catch (error) {
                console.error('Error loading projects:', error);
                const projectsGrid = document.getElementById('projectsGrid');
                projectsGrid.innerHTML = '<div class="col-span-full text-center text-red-500 py-8">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏•‡∏á‡∏≤‡∏ô</div>';
            }
        }

        // Display Projects with Animation
        function displayProjects(projects, animate = false) {
            const projectsGrid = document.getElementById('projectsGrid');
            
            if (animate) {
                // Fade out existing cards
                const existingCards = projectsGrid.querySelectorAll('.project-card');
                existingCards.forEach(card => {
                    card.classList.add('fade-out');
                });
                
                // Wait for fade out animation, then update content
                setTimeout(() => {
                    updateProjectsContent(projects, projectsGrid);
                }, 250);
            } else {
                updateProjectsContent(projects, projectsGrid);
            }
        }

        function updateProjectsContent(projects, projectsGrid) {
            projectsGrid.innerHTML = '';

            if (projects.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'col-span-full text-center text-gray-500 py-8 project-card fade-in';
                emptyMessage.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ';
                projectsGrid.appendChild(emptyMessage);
                return;
            }

            projects.forEach((project, index) => {
                const projectCard = createProjectCard(project, project.id);
                projectCard.classList.add('project-card');
                
                // Add staggered animation delay
                setTimeout(() => {
                    projectCard.classList.add('fade-in');
                    projectsGrid.appendChild(projectCard);
                }, index * 100);
            });
        }

        // Filter Projects with Animation
        function filterProjects(category) {
            currentFilter = category;
            if (category === 'all') {
                displayProjects(allProjects, true);
            } else {
                const filtered = allProjects.filter(project => project.category === category);
                displayProjects(filtered, true);
            }
            
            // Disable sort mode when changing filters
            if (isSortMode) {
                disableSortMode();
            }
        }

        // Function to convert Google Drive link to direct image URL
        function convertGoogleDriveUrl(url) {
            if (!url) return '';
            
            // Check if it's a Google Drive link
            if (url.includes('drive.google.com')) {
                // Extract file ID from various Google Drive URL formats
                let fileId = '';
                
                if (url.includes('/file/d/')) {
                    // Format: https://drive.google.com/file/d/FILE_ID/view?usp=sharing
                    fileId = url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/)?.[1];
                } else if (url.includes('id=')) {
                    // Format: https://drive.google.com/open?id=FILE_ID
                    fileId = url.match(/id=([a-zA-Z0-9_-]+)/)?.[1];
                } else if (url.includes('/d/')) {
                    // Alternative format
                    fileId = url.match(/\/d\/([a-zA-Z0-9_-]+)/)?.[1];
                }
                
                if (fileId) {
                    // Try multiple Google Drive direct link formats
                    // This format works better for images
                    return `https://lh3.googleusercontent.com/d/${fileId}`;
                }
            }
            
            // Return original URL if not Google Drive or already converted
            return url;
        }

        // Fallback function for Google Drive images
        function handleImageError(img, originalUrl) {
            if (originalUrl && originalUrl.includes('drive.google.com')) {
                // Extract file ID and try alternative formats
                let fileId = '';
                if (originalUrl.includes('/file/d/')) {
                    fileId = originalUrl.match(/\/file\/d\/([a-zA-Z0-9_-]+)/)?.[1];
                } else if (originalUrl.includes('id=')) {
                    fileId = originalUrl.match(/id=([a-zA-Z0-9_-]+)/)?.[1];
                }
                
                if (fileId) {
                    // Try alternative Google Drive formats
                    const alternatives = [
                        `https://drive.google.com/uc?export=view&id=${fileId}`,
                        `https://drive.google.com/uc?id=${fileId}`,
                        `https://docs.google.com/uc?export=view&id=${fileId}`
                    ];
                    
                    // Try each alternative
                    let currentIndex = img.dataset.attemptIndex ? parseInt(img.dataset.attemptIndex) : 0;
                    if (currentIndex < alternatives.length) {
                        img.dataset.attemptIndex = (currentIndex + 1).toString();
                        img.src = alternatives[currentIndex];
                        return;
                    }
                }
            }
            
            // If all attempts fail, hide the image and show placeholder
            img.style.display = 'none';
            if (img.parentElement) {
                img.parentElement.innerHTML = 'üñºÔ∏è';
            }
        }

        // Drag and Drop Functions
        function enableSortMode() {
            isSortMode = true;
            const projectsGrid = document.getElementById('projectsGrid');
            const sortModeBanner = document.getElementById('sortModeBanner');
            const toggleBtn = document.getElementById('toggleSortMode');
            const saveBtn = document.getElementById('saveSortOrder');
            const cancelBtn = document.getElementById('cancelSort');
            
            // Store original order of currently filtered projects
            originalOrder = [...getCurrentFilteredProjects()];
            
            // Update UI
            projectsGrid.classList.add('sort-mode-active');
            sortModeBanner.classList.remove('hidden');
            toggleBtn.classList.add('hidden');
            saveBtn.classList.remove('hidden');
            cancelBtn.classList.remove('hidden');
            toggleBtn.textContent = 'üîÑ ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á';
            
            // Re-render projects with drag handles
            displayProjectsForSorting(getCurrentFilteredProjects());
            
            showNotification('‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß', '‡∏•‡∏≤‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö', 'info');
        }

        function disableSortMode() {
            isSortMode = false;
            const projectsGrid = document.getElementById('projectsGrid');
            const sortModeBanner = document.getElementById('sortModeBanner');
            const toggleBtn = document.getElementById('toggleSortMode');
            const saveBtn = document.getElementById('saveSortOrder');
            const cancelBtn = document.getElementById('cancelSort');
            
            // Update UI
            projectsGrid.classList.remove('sort-mode-active');
            sortModeBanner.classList.add('hidden');
            toggleBtn.classList.remove('hidden');
            saveBtn.classList.add('hidden');
            cancelBtn.classList.add('hidden');
            toggleBtn.textContent = 'üîÑ ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á';
            
            // Re-render projects without drag handles
            displayProjects(getCurrentFilteredProjects());
        }

        // Display projects specifically for sorting mode
        function displayProjectsForSorting(projects) {
            const projectsGrid = document.getElementById('projectsGrid');
            projectsGrid.innerHTML = '';

            if (projects.length === 0) {
                const emptyMessage = document.createElement('div');
                emptyMessage.className = 'col-span-full text-center text-gray-500 py-8 project-card';
                emptyMessage.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏ô‡∏µ‡πâ';
                projectsGrid.appendChild(emptyMessage);
                return;
            }

            projects.forEach((project, index) => {
                const projectCard = createProjectCard(project, project.id);
                projectCard.classList.add('project-card');
                projectCard.dataset.projectId = project.id; // Add data attribute for easier identification
                
                // Enable drag and drop immediately
                enableDragAndDrop(projectCard);
                
                projectsGrid.appendChild(projectCard);
            });
        }

        function enableDragAndDrop(card) {
            card.draggable = true;
            card.style.cursor = 'grab';
            
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragover', handleDragOver);
            card.addEventListener('drop', handleDrop);
            card.addEventListener('dragend', handleDragEnd);
            card.addEventListener('dragenter', handleDragEnter);
            card.addEventListener('dragleave', handleDragLeave);
        }

        function disableDragAndDrop(card) {
            card.draggable = false;
            card.style.cursor = 'pointer';
            
            card.removeEventListener('dragstart', handleDragStart);
            card.removeEventListener('dragover', handleDragOver);
            card.removeEventListener('drop', handleDrop);
            card.removeEventListener('dragend', handleDragEnd);
            card.removeEventListener('dragenter', handleDragEnter);
            card.removeEventListener('dragleave', handleDragLeave);
        }

        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';
            return false;
        }

        function handleDragEnter(e) {
            if (this !== draggedElement) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            
            if (draggedElement !== this) {
                // Get the container
                const container = document.getElementById('projectsGrid');
                const allCards = [...container.querySelectorAll('.project-card')];
                
                // Get indices
                const draggedIndex = allCards.indexOf(draggedElement);
                const targetIndex = allCards.indexOf(this);
                
                // Reorder in DOM
                if (draggedIndex < targetIndex) {
                    container.insertBefore(draggedElement, this.nextSibling);
                } else {
                    container.insertBefore(draggedElement, this);
                }
                
                // Update the projects array order
                const currentProjects = getCurrentFilteredProjects();
                const draggedProject = currentProjects[draggedIndex];
                currentProjects.splice(draggedIndex, 1);
                currentProjects.splice(targetIndex, 0, draggedProject);
            }
            
            this.classList.remove('drag-over');
            return false;
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            
            // Remove drag-over class from all cards
            const projectCards = document.querySelectorAll('.project-card');
            projectCards.forEach(card => {
                card.classList.remove('drag-over');
            });
            
            draggedElement = null;
        }

        function getCurrentFilteredProjects() {
            if (currentFilter === 'all') {
                return allProjects;
            } else {
                return allProjects.filter(project => project.category === currentFilter);
            }
        }

        async function saveSortOrder() {
            try {
                const container = document.getElementById('projectsGrid');
                const cardElements = [...container.querySelectorAll('.project-card[data-project-id]')];
                
                // Get the new order based on DOM position
                const newOrder = [];
                const currentFilteredProjects = getCurrentFilteredProjects();
                
                cardElements.forEach((card, index) => {
                    const projectId = card.dataset.projectId;
                    if (projectId) {
                        const project = allProjects.find(p => p.id === projectId);
                        if (project) {
                            // Calculate new order based on category
                            let newOrderValue;
                            if (currentFilter === 'all') {
                                // For 'all' filter, use global ordering
                                newOrderValue = index + 1;
                            } else {
                                // For specific categories, maintain relative order within category
                                const categoryProjects = allProjects.filter(p => p.category === currentFilter);
                                const minOrder = Math.min(...categoryProjects.map(p => p.order || 999));
                                newOrderValue = minOrder + index;
                            }
                            
                            newOrder.push({ 
                                id: project.id, 
                                order: newOrderValue,
                                category: project.category 
                            });
                        }
                    }
                });
                
                // Update order in Firestore
                const batch = db.batch();
                newOrder.forEach(item => {
                    const projectRef = db.collection('projects').doc(item.id);
                    batch.update(projectRef, { order: item.order });
                });
                
                await batch.commit();
                
                // Update local data
                newOrder.forEach(updatedItem => {
                    const index = allProjects.findIndex(p => p.id === updatedItem.id);
                    if (index !== -1) {
                        allProjects[index].order = updatedItem.order;
                    }
                });
                
                // Re-sort allProjects array
                allProjects.sort((a, b) => {
                    if (a.order !== b.order) {
                        return (a.order || 999) - (b.order || 999);
                    }
                    return (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0);
                });
                
                disableSortMode();
                
                showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error saving sort order:', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            }
        }

        function cancelSort() {
            // Restore original order for current filter
            disableSortMode();
            showNotification('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á', '‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡πÅ‡∏•‡πâ‡∏ß', 'info');
        }

        // Create Project Card
        function createProjectCard(project, id) {
            const card = document.createElement('div');
            card.className = 'bg-white bg-opacity-80 backdrop-blur-md rounded-2xl p-6 hover:transform hover:scale-105 transition-all duration-300 shadow-lg border border-blue-100 cursor-pointer project-card';
            
            // Get first available image and convert Google Drive URL
            let displayImage = '';
            for (let i = 1; i <= 10; i++) {
                if (project[`image${i}`] && project[`image${i}`].trim()) {
                    displayImage = convertGoogleDriveUrl(project[`image${i}`]);
                    break;
                }
            }
            
            card.innerHTML = `
                <div class="relative">
                    ${isAdminLoggedIn && isSortMode ? `<div class="drag-handle absolute top-2 left-2 bg-green-500 text-white p-2 rounded-full text-sm z-10">‚ãÆ‚ãÆ</div>` : ''}
                    <div class="aspect-[4/3] bg-gradient-to-r from-blue-400 to-blue-600 rounded-lg mb-4 flex items-center justify-center text-4xl text-white">
                        ${displayImage ? `<img src="${displayImage}" alt="${project.title}" class="w-full h-full object-cover rounded-lg" data-original-url="${project.image1 || ''}" onerror="handleImageError(this, this.dataset.originalUrl)">` : 'üñºÔ∏è'}
                    </div>
                    ${isAdminLoggedIn && !isSortMode ? `<button class="edit-project-btn absolute top-2 right-2 bg-yellow-500 hover:bg-yellow-600 text-white p-2 rounded-full text-sm transition-colors z-10" data-project-id="${id}">‚úèÔ∏è</button>` : ''}
                </div>
                <h4 class="text-xl font-bold mb-2 text-gray-800">${project.title}</h4>
                <p class="text-gray-600 mb-4 line-clamp-3">${project.description}</p>
                <div class="text-blue-600 font-semibold text-sm">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‚Üí</div>
            `;
            
            // Add click event to show modal (but not in sort mode or if clicking edit button)
            card.addEventListener('click', (e) => {
                // Don't open modal if in sort mode or clicking on edit button
                if (isSortMode || e.target.closest('.edit-project-btn')) {
                    return;
                }
                showProjectDetail(project);
            });
            
            // Add edit button event listener
            const editBtn = card.querySelector('.edit-project-btn');
            if (editBtn) {
                editBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    editProject(id);
                });
            }
            
            // Enable drag and drop if in sort mode
            if (isSortMode) {
                enableDragAndDrop(card);
            }
            
            return card;
        }

        // Load Admin Data
        function loadAdminData() {
            console.log('Admin logged in successfully');
        }

        // Smooth Scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Category Filter Event Listeners
        document.getElementById('filterAll').addEventListener('click', () => {
            setActiveFilter('filterAll');
            filterProjects('all');
        });

        document.getElementById('filterProject').addEventListener('click', () => {
            setActiveFilter('filterProject');
            filterProjects('project');
        });

        document.getElementById('filterLearning').addEventListener('click', () => {
            setActiveFilter('filterLearning');
            filterProjects('learning');
        });

        document.getElementById('filterLeadership').addEventListener('click', () => {
            setActiveFilter('filterLeadership');
            filterProjects('leadership');
        });

        document.getElementById('filterPresentation').addEventListener('click', () => {
            setActiveFilter('filterPresentation');
            filterProjects('presentation');
        });

        // Set Active Filter
        function setActiveFilter(activeId) {
            document.querySelectorAll('.category-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(activeId).classList.add('active');
        }

        // Typewriter Effect with Multiple Texts
        function typeWriter(element, texts, speed = 100) {
            let currentTextIndex = 0;
            let i = 0;
            
            function type() {
                const currentText = texts[currentTextIndex];
                
                if (i < currentText.length) {
                    element.innerHTML += currentText.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    // Pause before clearing and moving to next text
                    setTimeout(() => {
                        // Clear text with backspace effect
                        backspace();
                    }, 2000);
                }
            }
            
            function backspace() {
                const currentText = texts[currentTextIndex];
                
                if (element.innerHTML.length > 0) {
                    element.innerHTML = element.innerHTML.slice(0, -1);
                    setTimeout(backspace, 50);
                } else {
                    // Move to next text
                    currentTextIndex = (currentTextIndex + 1) % texts.length;
                    i = 0;
                    setTimeout(type, 500);
                }
            }
            
            type();
        }

        // Initialize typewriter effect
        function initTypewriter() {
            const typewriterElement = document.getElementById('typewriterText');
            const texts = [
                '‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå Portfolio ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°',
                '‡∏ú‡∏°‡∏ä‡∏∑‡πà‡∏≠ ‡∏ô‡∏≤‡∏¢‡πÄ‡∏à‡∏ï‡∏ï‡πå‡∏ô‡∏¥‡∏†‡∏±‡∏ó‡∏ò‡πå ‡πÄ‡∏ö‡πá‡∏ç‡∏à‡∏°‡∏¥‡∏ï‡∏£‡∏Å‡∏∏‡∏•',
                '‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©',
                '‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏ß‡∏¥‡∏à‡∏±‡∏¢ ‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ',
                '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏î‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥'
            ];
            
            // Start typing after a short delay
            setTimeout(() => {
                typeWriter(typewriterElement, texts, 80);
            }, 500);
        }

        // Sort Mode Event Listeners
        document.getElementById('toggleSortMode').addEventListener('click', () => {
            if (isSortMode) {
                disableSortMode();
            } else {
                enableSortMode();
            }
        });

        document.getElementById('saveSortOrder').addEventListener('click', saveSortOrder);
        document.getElementById('cancelSort').addEventListener('click', cancelSort);

        // Add Education Event Listener
        document.getElementById('addEducation').addEventListener('click', async (e) => {
            e.preventDefault();
            
            const school = document.getElementById('educationSchool').value.trim();
            const level = document.getElementById('educationLevel').value.trim();
            const year = document.getElementById('educationYear').value.trim();
            const description = document.getElementById('educationDescription').value.trim();
            const logo = document.getElementById('educationLogo').value.trim();
            const order = parseInt(document.getElementById('educationOrder').value) || 999;

            // Collect selected programs
            const selectedPrograms = [];
            const programCheckboxes = document.querySelectorAll('.education-program:checked');
            programCheckboxes.forEach(checkbox => {
                if (checkbox.value === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ') {
                    const customProgram = document.getElementById('educationCustomProgram').value.trim();
                    if (customProgram) {
                        selectedPrograms.push(customProgram);
                    }
                } else {
                    selectedPrograms.push(checkbox.value);
                }
            });

            if (!school || !level || !year) {
                showNotification('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡πÅ‡∏•‡∏∞‡∏õ‡∏µ‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤', 'error');
                return;
            }

            const addButton = document.getElementById('addEducation');
            const originalText = addButton.textContent;
            addButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°...';
            addButton.disabled = true;

            try {
                const educationData = {
                    school: school,
                    level: level,
                    year: year,
                    description: description,
                    logo: logo || '',
                    order: order,
                    programs: selectedPrograms,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                };

                const docRef = await db.collection('education').add(educationData);

                console.log('Education added with ID: ', docRef.id);

                // Clear form
                document.getElementById('educationSchool').value = '';
                document.getElementById('educationLevel').value = '';
                document.getElementById('educationYear').value = '';
                document.getElementById('educationDescription').value = '';
                document.getElementById('educationLogo').value = '';
                document.getElementById('educationOrder').value = '';
                document.getElementById('educationCustomProgram').value = '';
                
                // Clear program checkboxes
                document.querySelectorAll('.education-program').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.getElementById('educationCustomProgram').classList.add('hidden');

                // Reload education
                await loadEducation();
                
                showNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', '‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß', 'success');
            } catch (error) {
                console.error('Error adding education: ', error);
                showNotification('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ: ' + error.message, 'error');
            } finally {
                addButton.textContent = originalText;
                addButton.disabled = false;
            }
        });

        // Handle program type switching for add education form
        document.addEventListener('DOMContentLoaded', function() {
            const programTypeRadios = document.querySelectorAll('.program-type-radio');
            const regularPrograms = document.getElementById('regularPrograms');
            const specialPrograms = document.getElementById('specialPrograms');
            
            programTypeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === '‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô') {
                        regularPrograms.classList.remove('hidden');
                        specialPrograms.classList.add('hidden');
                    } else {
                        regularPrograms.classList.add('hidden');
                        specialPrograms.classList.remove('hidden');
                    }
                });
            });
        });

        // Handle "‡∏≠‡∏∑‡πà‡∏ô‡πÜ" checkbox for add education form
        document.getElementById('programOther').addEventListener('change', function() {
            const customInput = document.getElementById('educationCustomProgram');
            if (this.checked) {
                customInput.classList.remove('hidden');
            } else {
                customInput.classList.add('hidden');
                customInput.value = '';
            }
        });

        // Initialize
        checkSessionValidity(); // Check session on page load
        loadEducation();
        loadProjects();
        initTypewriter();

        // Auth State Observer
        auth.onAuthStateChanged(user => {
            if (user) {
                console.log('Admin logged in:', user.email);
            } else {
                console.log('Admin logged out');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'989f36c1c786ee29',t:'MTc1OTY5MTM3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
